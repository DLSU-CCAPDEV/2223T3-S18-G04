<!DOCTYPE html>
<html>
	<head>
		<title>Slot Availability</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
		<script src="scripts/date-time-scripts.js"></script>
		<link rel="stylesheet" type="text/css" media="all" href="styles/navbar.css">
		<link rel="stylesheet" type="text/css" href="styles/slot_availability.css">
		<link rel="stylesheet" type="text/css" href="styles/stylebase.css">
		<link rel="stylesheet" href="styles/reserve.css">
    	<link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
		<link rel="icon" type="image/x-icon" href="microscope_round.ico">

		<script type="text/javascript">

			var labOneContents;
			var labTwoContents;
			var labThreeContents;

			function createCalendar() {
				const table = document.createElement('table');
				table.style.border = '1px solid black';

				var tableHeader = document.createElement('thead');
				table.appendChild(tableHeader);

				var reservationIntervals = [
					"07:30AM - 08:00AM",
					"08:00AM - 08:30AM",
					"08:30AM - 09:00AM",
					"09:00AM - 09:30AM",
					"09:30AM - 10:00AM",
					"10:00AM - 10:30AM",
					"10:30PM - 11:00AM",
					"11:00AM - 11:30AM",
					"11:30AM - 12:00PM",
					"12:00PM - 12:30PM",
					"12:30PM - 01:00PM",
					"01:00PM - 01:30PM",
					"01:30PM - 02:00PM",
					"02:00PM - 02:30PM",
					"02:30PM - 03:00PM",
					"03:00PM - 03:30PM",
					"03:30PM - 04:00PM",
					"04:00PM - 04:30PM",
					"04:30PM - 05:00PM",
					"05:00PM - 05:30PM",
					"05:30PM - 06:00PM",
					"06:00PM - 06:30PM",
					"06:30PM - 07:00PM",
					"07:00PM - 07:30PM",
					"07:30PM - 08:00PM",
					"08:00PM - 08:30PM",
					"08:30PM - 09:00PM"
				]

				for (var i = 0; i < 8; i++) {

					var tHeadCell = tableHeader.appendChild(document.createElement('th'));

					switch (i) {
						case 1:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 0)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 0))));
							break;
						case 2:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 1)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 1))));
							break;
						case 3:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 2)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 2))));
							break;
						case 4:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 3)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 3))));
							break;
						case 5:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 4)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 4))));
							break;
						case 6:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 5)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 5))));
							break;
						case 7:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 6)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 6))));
							break;
					}
				}

				for (var i = 0; i < 27; i++) {
						const tableRow = table.insertRow();
					for (var j = 0; j < 8; j++) {
						const tableCell = tableRow.insertCell();
						tableCell.style.width = '30px';
						tableCell.style.height = '100px';
						tableCell.style.border = '1px solid black';
						if (j == 0) {
							tableCell.append(document.createTextNode(reservationIntervals[i]));
						}
					}
				}

				return table;
			}

			$(document).ready(function() {
				for (var i = 0; i < 3; i++) {
					var lab;
					switch(i) {
						case 0:
							lab = document.getElementById("lab-1");
							break;
						case 1:
							lab = document.getElementById("lab-2");
							break;
						case 2:
							lab = document.getElementById("lab-3");
							break;
					}

					const labTable = lab.appendChild(createCalendar());
					$(labTable).addClass('calendar-table');
					labTable.style.display = "none";
				}

				$("#lab-1").click(function() {
					var calendar = document.querySelector('#lab-1 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})

				$("#lab-2").click(function() {
					var calendar = document.querySelector('#lab-2 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})

				$("#lab-3").click(function() {
					var calendar = document.querySelector('#lab-3 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})
			})

		</script>

		<style type="text/css">

			.lab-dropdown {
				display: flex;
				flex-direction: column;
				width: 70%;
				margin: 8px;
				padding: 10px;
				background-color: #eeeeee;
				border: 1px solid black;
				border-radius: 8px;
				position: relative;
				left:50%;
				transform: translate(-50%, 0);
			}

			.lab-dropdown-row {
				display: flex;
				flex-direction: row;
			}

			.calendar-table {
				table-layout: fixed;
				width: 100%;
			}

		</style>

	</head>
	<body>
		<nav class="site_header">
			<span id="site_name"><h1>Lab Reservation System</h1></span>
			<span class="site_nav">
				<span class="user_profile" onclick="location.href='user_profile.html'"> Profile </span>
				<span class="search_slots" onclick="location.href='slot_search.html'"> Search Lab Slots </span>
				<span class="lab_slots" onclick="location.href='slot_availability.html'"> View Lab Slots </span>
				<span class="logout" onclick="location.href='login.html'"> Log Out </span>
			</span>

		</nav>

		<div class="container">
			<div class="lab-dropdown" id="lab-1">
				<h3> Lab 1 </h3>
			</div>

			<div class="lab-dropdown" id="lab-2">
				<h3> Lab 2 </h3>
			</div>

			<div class="lab-dropdown" id="lab-3">
				<h3> Lab 3 </h3>
			</div>

			<button class="test" id="testbtn"> Click me </button>
		</div>


		<!-- Reserve Seat -->

		<section class="reserve_container">
			<img src="complab.png" class="labimage" alt="computer lab">
			<div class="uil uil-times-circle close"></div>
			<!-- Reserve slot -->
			<div class="reserveinput">
				<form>
					<h2>Reserve a seat</h2>
					<!-- Lab # -->
					<!-- Available Seats: -->
					<!-- Date / Time:  -->
					<div class="textbox">
						<input type="text" id="labchosen" name="labchosen" class="inputtext" value="lab#" readonly>
						<i class="uil uil-desktop"></i>
					</div>
					<div class="textbox">
						<!-- <select class="inputtext" name="datersv" id="datersv" size="1">
							<option value="#">date</option>
						</select> -->
						<input type="date" id="datersv" name="datersv" class="inputtext" required>
						<i class="uil uil-calendar-alt" title="Add Date"></i>
					</div>
					<div class="textbox">
						<select class="inputtext" name="timersv" id="timersv" size="1">
							<option value="07:30AM - 08:00AM"> 07:30AM - 08:00AM </option>
							<option value="08:00AM - 08:30AM"> 08:00AM - 08:30AM </option>
							<option value="08:30AM - 09:00AM"> 08:30AM - 09:00AM </option>
							<option value="09:00AM - 09:30AM"> 09:00AM - 09:30AM </option>
							<option value="09:30AM - 10:00AM"> 09:30AM - 10:00AM </option>
							<option value="10:00AM - 10:30AM"> 10:00AM - 10:30AM </option>
							<option value="10:30PM - 11:00AM"> 10:30PM - 11:00AM </option>
							<option value="11:00AM - 11:30AM"> 11:00AM - 11:30AM </option>
							<option value="11:30AM - 12:00PM"> 11:30AM - 12:00PM </option>
							<option value="12:00PM - 12:30PM"> 12:00PM - 12:30PM </option>
							<option value="12:30PM - 01:00PM"> 12:30PM - 01:00PM </option>
							<option value="01:00PM - 01:30PM"> 01:00PM - 01:30PM </option>
							<option value="01:30PM - 02:00PM"> 01:30PM - 02:00PM </option>
							<option value="02:00PM - 02:30PM"> 02:00PM - 02:30PM </option>
							<option value="02:30PM - 03:00PM"> 02:30PM - 03:00PM </option>
							<option value="03:00PM - 03:30PM"> 03:00PM - 03:30PM </option>
							<option value="03:30PM - 04:00PM"> 03:30PM - 04:00PM </option>
							<option value="04:00PM - 04:30PM"> 04:00PM - 04:30PM </option>
							<option value="04:30PM - 05:00PM"> 04:30PM - 05:00PM </option>
							<option value="05:00PM - 05:30PM"> 05:00PM - 05:30PM </option>
							<option value="05:30PM - 06:00PM"> 05:30PM - 06:00PM </option>
							<option value="06:00PM - 06:30PM"> 06:00PM - 06:30PM </option>
							<option value="06:30PM - 07:00PM"> 06:30PM - 07:00PM </option>
							<option value="07:00PM - 07:30PM"> 07:00PM - 07:30PM </option>
							<option value="07:30PM - 08:00PM"> 07:30PM - 08:00PM </option>
							<option value="08:00PM - 08:30PM"> 08:00PM - 08:30PM </option>
							<option value="08:30PM - 09:00PM"> 08:30PM - 09:00PM </option>
						</select>
						<i class="uil uil-clock" title="Add Timeslot"></i>
					</div>
					<div class="textbox">
						<input class= "inputtext" name="namersv" id="namersv" type="text" placeholder="Reservation Name (Optional)">
						<i class="uil uil-ticket" title="Add a name for seat reservation."></i>
					</div>
					<div class="textbox">
						<input class= "inputtext" name="seatsrsv" id="seatsrsv" type="number" placeholder="Number of Seats" required>
						<i class="uil uil-users-alt" title="Specify how many seats will be reserved."></i>
					</div>
					<button type="button" class="reservebtn" id="buttonrsv" name="buttonrsv">Add Reservation</button>
				</form>

				<form action="#">
					<p class="editrsrv"> Already have a reservation? <span><a href="#" id="showlistrsv">Edit Reservation</a></span></p>
				</form>

			</div>

			<div class="listreserve">
				<h2>My Reservations</h2>
				<div id="rootlab"></div>
				<form action="#">
					<p class="editrsrv"> Want to add a reservation? <span><a href="#" id="addrsv">Add Reservation</a></span></p>
				</form>
			</div>

			<!-- <div class="notifbox">
				<label for="notif"> Thank you for Registering! </label>
				<button> Ok </button>
				<form action="#">
					<p class="editrsrv"> <a href="#" id="addrsv"> Create New Reservation</a></p>
				</form>
			</div> -->

			<div class="editdeletereserve">
				<form action="#">
					<h2>Edit Reservation</h2>
					<!-- Lab # -->
					<!-- Available Seats: -->
					<!-- Date / Time:  -->
					<div class="textbox">
						<input type="text" id="labchosen" name="labchosen" class="inputtext" value="lab#" readonly>
						<i class="uil uil-desktop"></i>
					</div>
					<div class="textbox">
						<!-- <select class="inputtext" name="datersv" id="datersv" size="1">
							<option value="#">date</option>
						</select> -->
						<input type="date" id="datersvedit" name="datersvedit" class="inputtext">
						<i class="uil uil-calendar-alt" title="Add Date"></i>
					</div>
					<div class="textbox">
						<select class="inputtext" name="timersv" id="timersvedit" size="1">
							<option value="0"> 07:30AM - 08:00AM </option>
							<option value="1"> 08:00AM - 08:30AM </option>
							<option value="2"> 08:30AM - 09:00AM </option>
							<option value="3"> 09:00AM - 09:30AM </option>
							<option value="4"> 09:30AM - 10:00AM </option>
							<option value="5"> 10:00AM - 10:30AM </option>
							<option value="6"> 10:30PM - 11:00AM </option>
							<option value="7"> 11:00AM - 11:30AM </option>
							<option value="8"> 11:30AM - 12:00PM </option>
							<option value="9"> 12:00PM - 12:30PM </option>
							<option value="10"> 12:30PM - 01:00PM </option>
							<option value="11"> 01:00PM - 01:30PM </option>
							<option value="12"> 01:30PM - 02:00PM </option>
							<option value="13"> 02:00PM - 02:30PM </option>
							<option value="14"> 02:30PM - 03:00PM </option>
							<option value="15"> 03:00PM - 03:30PM </option>
							<option value="16"> 03:30PM - 04:00PM </option>
							<option value="17"> 04:00PM - 04:30PM </option>
							<option value="18"> 04:30PM - 05:00PM </option>
							<option value="19"> 05:00PM - 05:30PM </option>
							<option value="20"> 05:30PM - 06:00PM </option>
							<option value="21"> 06:00PM - 06:30PM </option>
							<option value="22"> 06:30PM - 07:00PM </option>
							<option value="23"> 07:00PM - 07:30PM </option>
							<option value="24"> 07:30PM - 08:00PM </option>
							<option value="25"> 08:00PM - 08:30PM </option>
							<option value="26"> 08:30PM - 09:00PM </option>
						</select>
						<i class="uil uil-clock" title="Add Timeslot"></i>
					</div>
					<div class="textbox">
						<input class= "inputtext" name="namersv" id="namersvedit" type="text" placeholder="Reservation Name (Optional)">
						<i class="uil uil-ticket" title="Add a name for seat reservation."></i>
					</div>
					<div class="textbox">
						<input class= "inputtext" name="seatsrsv" id="seatsrsvedit" type="number" placeholder="Number of Seats">
						<i class="uil uil-users-alt" title="Specify how many seats will be reserved."></i>
					</div>
					<button type="button" class="reservebtn" id="editrsv" name="editrsv">Edit Reservation</button>
					<button type="button" class="editdeletebtn" id="deletersv" name="deletersv">Delete Reservation</button>
					<button type="button" class="editdeletebtn" id="cancelbutton" name="cancelbutton">Cancel</button>
				</form>
		</section>
		<script src="reserve.js"></script>
	</body>
</html>
