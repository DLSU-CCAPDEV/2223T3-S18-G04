<!DOCTYPE html>
<html>
	<head>
		<title>Slot Availability</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
		<script src="scripts/date-time-scripts.js"></script>
		<link rel="stylesheet" type="text/css" href="user_profile.css">

		<script type="text/javascript">

			var labOneContents;
			var labTwoContents;
			var labThreeContents;

			function createCalendar() {
				const table = document.createElement('table');
				table.style.border = '1px solid black';

				var tableHeader = document.createElement('thead');
				table.appendChild(tableHeader);

				var reservationIntervals = [
					"07:30AM - 09:00AM",
					"09:00AM - 09:30AM",
					"09:30AM - 10:00AM",
					"10:00AM - 10:30AM",
					"10:30PM - 11:00AM",
					"11:00AM - 11:30AM",
					"11:30AM - 12:00PM",
					"12:00PM - 12:30PM",
					"12:30PM - 01:00PM",
					"01:00PM - 01:30PM",
					"01:30PM - 02:00PM",
					"02:00PM - 02:30PM",
					"02:30PM - 03:00PM",
					"03:00PM - 03:30PM",
					"03:30PM - 04:00PM",
					"04:00PM - 04:30PM",
					"04:30PM - 05:00PM",
					"05:00PM - 05:30PM",
					"05:30PM - 06:00PM",
					"06:00PM - 06:30PM",
					"06:30PM - 07:00PM",
					"07:00PM - 07:30PM",
					"07:30PM - 08:00PM",
					"08:00PM - 08:30PM",
					"08:30PM - 09:00PM"
				]

				for (var i = 0; i < 8; i++) {

					var tHeadCell = tableHeader.appendChild(document.createElement('th'));

					switch (i) {
						case 1:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 0)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 0))));
							break;
						case 2:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 1)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 1))));
							break;
						case 3:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 2)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 2))));
							break;
						case 4:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 3)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 3))));
							break;
						case 5:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 4)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 4))));
							break;
						case 6:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 5)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 5))));
							break;
						case 7:
							tHeadCell.appendChild(document.createTextNode(moment(dateOffset(new Date(), 6)).format('dddd')));
							tHeadCell.appendChild(document.createElement('br'));
							tHeadCell.appendChild(document.createTextNode(parseDateToWords(dateOffset(new Date(), 6))));
							break;
					}
				}

				for (var i = 0; i < 25; i++) {
						const tableRow = table.insertRow();
					for (var j = 0; j < 8; j++) {
						const tableCell = tableRow.insertCell();
						tableCell.style.width = '30px';
						tableCell.style.height = '100px';
						tableCell.style.border = '1px solid black';
						if (j == 0) {
							tableCell.append(document.createTextNode(reservationIntervals[i]));
						}
					}
				}

				return table;
			}

			$(document).ready(function() {
				for (var i = 0; i < 3; i++) {
					var lab;
					switch(i) {
						case 0:
							lab = document.getElementById("lab-1");
							break;
						case 1:
							lab = document.getElementById("lab-2");
							break;
						case 2:
							lab = document.getElementById("lab-3");
							break;
					}

					const labTable = lab.appendChild(createCalendar());
					$(labTable).addClass('calendar-table');
					labTable.style.display = "none";
				}

				$("#lab-1").click(function() {
					var calendar = document.querySelector('#lab-1 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})

				$("#lab-2").click(function() {
					var calendar = document.querySelector('#lab-2 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})

				$("#lab-3").click(function() {
					var calendar = document.querySelector('#lab-3 > .calendar-table')
					if (calendar.style.display == "none")
						calendar.style.display = "table";
					else
						calendar.style.display = "none";
				})
			})

		</script>

		<style type="text/css">

			.lab-dropdown {
				display: flex;
				flex-direction: column;
				width: 70%;
				margin: 8px;
				padding: 10px;
				background-color: #eeeeee;
				border: 1px solid black;
				border-radius: 8px;
			}

			.lab-dropdown-row {
				display: flex;
				flex-direction: row;
			}

			.calendar-table {
				table-layout: fixed;
				width: 100%;
			}

		</style>

	</head>
	<body>

		<div class="lab-dropdown" id="lab-1">
			<h3> Lab 1 </h3>
		</div>

		<div class="lab-dropdown" id="lab-2">
			<h3> Lab 2 </h3>
		</div>

		<div class="lab-dropdown" id="lab-3">
			<h3> Lab 3 </h3>
		</div>
	</body>
</html>